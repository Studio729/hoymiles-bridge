# Hoymiles S-Miles Configuration Example
# Copy this file to .env and adjust the values

# ===== Database Configuration =====
# PostgreSQL configuration (default uses docker service)
DB_TYPE=postgres
DB_HOST=postgres              # Use 'postgres' for docker service, or external host
DB_PORT=5432
DB_NAME=hoymiles
DB_USER=hoymiles
DB_PASSWORD=hoymiles_password
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# PostgreSQL Service Configuration (when using docker-compose)
POSTGRES_DB=hoymiles
POSTGRES_USER=hoymiles
POSTGRES_PASSWORD=hoymiles_password
POSTGRES_PORT=5432

# ===== DTU Configuration (Single DTU Mode) =====
DTU_HOST=192.168.1.100
DTU_PORT=502
MODBUS_UNIT_ID=1
# Note: Inverter type is auto-detected by hoymiles-modbus library

# ===== Modbus Communication =====
COMM_TIMEOUT=3
COMM_RETRIES=3
COMM_RECONNECT_DELAY=0
COMM_RECONNECT_DELAY_MAX=300

# ===== Timing Configuration =====
QUERY_PERIOD=60
EXPIRE_AFTER=0
RESET_HOUR=23
TIMEZONE=UTC

# ===== Persistence =====
PERSISTENCE_ENABLED=true

# ===== Web Server / Health Monitoring =====
# Web server provides health checks, metrics, statistics and API
# Endpoints: /health, /ready, /metrics, /stats, /api/sensors
HEALTH_ENABLED=true
HEALTH_HOST=0.0.0.0
HEALTH_PORT=8080              # Port for web server (change if 8080 conflicts)
METRICS_ENABLED=true

# ===== Logging =====
LOG_LEVEL=INFO
LOG_FORMAT=standard
LOG_TO_CONSOLE=true

# ===== Error Recovery =====
EXPONENTIAL_BACKOFF=true
CIRCUIT_BREAKER_THRESHOLD=5
